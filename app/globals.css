@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design System Variables */
:root {
  /* Glass Effects */
  --glass-blur: 20px;
  --glass-blur-subtle: 12px;
  --glass-blur-strong: 28px;
  --glass-blur-intense: 36px;
  --glass-bg: rgba(26, 26, 26, 0.72);
  --glass-bg-subtle: rgba(26, 26, 26, 0.5);
  --glass-bg-strong: rgba(26, 26, 26, 0.88);
  --glass-border: rgba(255, 255, 255, 0.12);
  --glass-border-subtle: rgba(255, 255, 255, 0.08);
  --glass-border-strong: rgba(255, 255, 255, 0.2);
  --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
  --glass-shadow-elevated: 0 16px 48px rgba(0, 0, 0, 0.35);
  
  /* Border Radii */
  --glass-radius-sm: 12px;
  --glass-radius-md: 16px;
  --glass-radius-lg: 20px;
  --glass-radius-xl: 24px;
  --glass-radius-2xl: 28px;
  --glass-radius-3xl: 32px;
  
  /* Transitions */
  --glass-transition: 200ms cubic-bezier(0.4, 0, 0.2, 1);
  --glass-transition-spring: 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
  
  /* Safe Areas */
  --safe-area-inset-top: 0px;
  --safe-area-inset-right: 0px;
  --safe-area-inset-bottom: 0px;
  --safe-area-inset-left: 0px;
  
  /* Header */
  --header-top-offset: 0px;
}

/* Safe Area for iOS 11.2+ */
@supports (padding-top: env(safe-area-inset-top)) {
  :root {
    --safe-area-inset-top: env(safe-area-inset-top);
    --safe-area-inset-right: env(safe-area-inset-right);
    --safe-area-inset-bottom: env(safe-area-inset-bottom);
    --safe-area-inset-left: env(safe-area-inset-left);
  }
}

/* Primary Font - Ploni */
@font-face {
  font-family: 'Ploni';
  src: url('/fonts/ploni-ultralight-aaa.otf') format('opentype');
  font-weight: 200;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Ploni';
  src: url('/fonts/ploni-light-aaa.otf') format('opentype');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Ploni';
  src: url('/fonts/ploni-regular-aaa.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* Fallback Font - Rubik */
@font-face {
  font-family: 'Rubik';
  src: url('/fonts/Rubik/Rubik-Regular.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Rubik';
  src: url('/fonts/Rubik/Rubik-Medium.ttf') format('truetype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Rubik';
  src: url('/fonts/Rubik/Rubik-Bold.ttf') format('truetype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Rubik';
  src: url('/fonts/Rubik/Rubik-Light.ttf') format('truetype');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

/* Base Styles */
@layer base {
  * {
    box-sizing: border-box;
  }

  html {
    line-height: 1.5;
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply font-ploni bg-background-dark text-foreground-light;
    margin: 0;
    overflow-x: hidden;
  }

  h1, h2, h3, h4, h5, h6 {
    line-height: 1.2;
    margin: 0;
    padding: 0;
  }

  p {
    margin: 0;
    padding: 0;
  }

  img {
    max-width: 100%;
    height: auto;
  }

  /* Improve tap targets on mobile */
  button, a {
    min-height: 44px;
    min-width: 44px;
  }

  /* Prevent iOS zoom on input focus */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="tel"],
  input[type="number"],
  textarea {
    font-size: 16px !important;
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, rgba(255, 170, 61, 0.4) 0%, rgba(255, 170, 61, 0.2) 100%);
    border-radius: 10px;
    border: 2px solid transparent;
    background-clip: padding-box;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, rgba(255, 170, 61, 0.6) 0%, rgba(255, 170, 61, 0.4) 100%);
  }

  ::-webkit-scrollbar-thumb:active {
    background: linear-gradient(180deg, rgba(255, 170, 61, 0.8) 0%, rgba(255, 170, 61, 0.5) 100%);
  }

  /* Firefox */
  * {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 170, 61, 0.4) transparent;
  }

  /* Hide scrollbar on mobile for cleaner look */
  @media (max-width: 768px) {
    ::-webkit-scrollbar {
      width: 3px;
      height: 3px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: rgba(255, 170, 61, 0.3);
    }
  }
}

/* Component Styles */
@layer components {
  /* Glass Card */
  .glass-card {
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur)) saturate(180%);
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(180%);
    border: 1px solid var(--glass-border);
    border-radius: var(--glass-radius-xl);
    box-shadow: var(--glass-shadow);
  }

  .glass-card-hover {
    @apply glass-card;
    transition: all var(--glass-transition);
  }

  .glass-card-hover:hover {
    border-color: rgba(255, 170, 61, 0.3);
    box-shadow: 0 4px 20px rgba(255, 170, 61, 0.15);
  }

  /* Elevated Glass (for floating elements) */
  .glass-elevated {
    background: var(--glass-bg-strong);
    backdrop-filter: blur(var(--glass-blur-strong)) saturate(200%);
    -webkit-backdrop-filter: blur(var(--glass-blur-strong)) saturate(200%);
    border: 1px solid var(--glass-border-strong);
    border-radius: var(--glass-radius-2xl);
    box-shadow: var(--glass-shadow-elevated);
  }

  /* Subtle Glass (less prominent) */
  .glass-subtle {
    background: var(--glass-bg-subtle);
    backdrop-filter: blur(var(--glass-blur-subtle)) saturate(150%);
    -webkit-backdrop-filter: blur(var(--glass-blur-subtle)) saturate(150%);
    border: 1px solid var(--glass-border-subtle);
    border-radius: var(--glass-radius-lg);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  }

  /* Interactive Glass (with tap feedback) */
  .glass-interactive {
    @apply glass-card;
    transition: all var(--glass-transition);
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }

  .glass-interactive:hover {
    background: var(--glass-bg-strong);
    transform: translateY(-2px);
  }

  .glass-interactive:active {
    transform: scale(0.98);
  }

  /* Gold Glow Effect */
  .gold-glow {
    box-shadow: 0 0 40px rgba(255, 170, 61, 0.3);
  }

  .gold-glow-sm {
    box-shadow: 0 0 20px rgba(255, 170, 61, 0.2);
  }

  /* Toggle Switch - ensures consistent sizing */
  .toggle-switch {
    @apply w-12 h-7 rounded-full transition-colors relative flex-shrink-0;
    min-height: 28px !important;
    max-height: 28px !important;
  }

  .toggle-switch .toggle-knob {
    @apply absolute top-1 w-5 h-5 rounded-full bg-white transition-all;
  }

  /* Icon Button - ensures icon centering */
  .icon-btn {
    @apply flex items-center justify-center flex-shrink-0;
  }

  /* Vintage Border */
  .vintage-border {
    @apply border-2 border-accent-gold/40;
    border-image: linear-gradient(135deg, #ffaa3d 0%, #7A5230 50%, #ffaa3d 100%) 1;
  }

  /* Section Title with Lines */
  .section-title {
    @apply text-center text-2xl md:text-3xl font-light tracking-wide uppercase text-foreground-light;
    display: grid;
    grid-template-columns: 1fr max-content 1fr;
    grid-gap: 16px;
    align-items: center;
  }

  .section-title::after,
  .section-title::before {
    content: "";
    display: block;
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba(255, 170, 61, 0.5), transparent);
  }

  /* Barber Pole Stripe Pattern */
  .barber-pole {
    background: repeating-linear-gradient(
      45deg,
      #D35400,
      #D35400 10px,
      #F2F2F2 10px,
      #F2F2F2 20px,
      #080b0d 20px,
      #080b0d 30px
    );
    background-size: 100% 50px;
    animation: barber-pole 2s linear infinite;
  }

  /* Touch-friendly button */
  .touch-btn {
    @apply min-h-[48px] min-w-[48px] flex items-center justify-center;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }

  /* Mobile-first container */
  .container-mobile {
    @apply px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto;
  }

  /* Shimmer loading effect */
  .shimmer {
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.1) 50%,
      rgba(255, 255, 255, 0) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }
}

/* Utilities */
@layer utilities {
  .content-style h1 {
    @apply section-title;
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Safe area padding for notched devices */
  .safe-bottom {
    padding-bottom: var(--safe-area-inset-bottom);
  }

  .safe-top {
    padding-top: var(--safe-area-inset-top);
  }

  .pb-safe {
    padding-bottom: max(var(--safe-area-inset-bottom), 8px);
  }

  .pt-safe {
    padding-top: max(var(--safe-area-inset-top), 8px);
  }

  /* Text gradient */
  .text-gradient-gold {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-accent-gold via-accent-gold-light to-accent-gold;
  }

  /* Animation delays */
  .animation-delay-100 {
    animation-delay: 100ms;
  }

  .animation-delay-200 {
    animation-delay: 200ms;
  }

  .animation-delay-300 {
    animation-delay: 300ms;
  }

  .animation-delay-400 {
    animation-delay: 400ms;
  }

  .animation-delay-500 {
    animation-delay: 500ms;
  }
}

/* PWA Standalone Mode */
@media (display-mode: standalone) {
  :root {
    --header-top-offset: env(safe-area-inset-top, 0px);
  }

  /* Adjust body for safe areas */
  body {
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
    /* Add padding for left/right safe areas (notch on landscape) */
    padding-left: env(safe-area-inset-left, 0);
    padding-right: env(safe-area-inset-right, 0);
  }

  /* Notch area background - fills the safe area inset */
  /* z-index is BELOW header (50) but above content */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: env(safe-area-inset-top, 0);
    background: #080b0d;
    z-index: 40; /* Below header z-50, above content */
    pointer-events: none;
  }

  /* Main content bottom padding for nav */
  main {
    padding-bottom: calc(5.5rem + env(safe-area-inset-bottom, 0));
  }

  /* Prevent rubber-band scrolling */
  html, body {
    overscroll-behavior-y: none;
  }
}

/* iOS Scroll Optimizations */
html {
  scroll-behavior: smooth;
}

@supports (-webkit-touch-callout: none) {
  html, body {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: contain;
  }

  [data-scroll], 
  .overflow-auto,
  .overflow-y-auto,
  .overflow-x-auto,
  .overflow-scroll {
    -webkit-overflow-scrolling: touch;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  button, a, input, select, textarea {
    touch-action: manipulation;
  }

  .smooth-scroll {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }
}

@media (display-mode: standalone) {
  @supports (-webkit-touch-callout: none) {
    body {
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      touch-action: pan-y;
    }

    html {
      overscroll-behavior: none;
    }

    main, [role="main"], .main-content {
      -webkit-overflow-scrolling: touch;
      will-change: scroll-position;
    }

    header, nav, .fixed {
      will-change: transform;
      transform: translateZ(0);
    }
  }
}

/* Touch Optimization */
@media (hover: none) {
  .glass-card-hover:hover,
  .glass-interactive:hover {
    transform: none;
    background: var(--glass-bg);
  }

  .glass-interactive:active {
    transform: scale(0.98);
    background: var(--glass-bg-strong);
  }

  *:focus {
    outline: none;
  }
}

button, [role="button"], a {
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

/* External Component Overrides */
.map-dark {
  filter: invert(90%) hue-rotate(180deg) brightness(0.9) contrast(0.9);
}

.map-dark img {
  filter: invert(100%) hue-rotate(180deg) brightness(1.1) contrast(1.1);
}

/* Toast Container Styles */
.Toastify__toast-body {
  font-family: 'Ploni', 'Rubik', sans-serif;
  font-size: 1rem;
}

/* React Day Picker Custom Styles */
.rdp-day_selected,
.rdp-day_selected:focus-visible,
.rdp-day_selected:hover {
  background-color: #ffaa3d !important;
  color: #080b0d !important;
}

/* Mobile drawer overlay */
.drawer-overlay {
  @apply fixed inset-0 bg-black/60 backdrop-blur-sm z-40;
}

/* Mobile bottom nav safe area */
.bottom-nav-safe {
  padding-bottom: max(var(--safe-area-inset-bottom), 12px);
}

/* Focus visible styles */
*:focus-visible {
  @apply outline-none ring-2 ring-accent-gold ring-offset-2 ring-offset-background-dark;
}
